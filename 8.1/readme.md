# Домашнее задание к занятию «Стандарт МЭК 61131-3. Знакомство со средой программирования»

### Цель задания

Выполнив домашнее задание, вы получите опыт работы в среде программирования ПЛК, освоите типовые приемы создания программ для ПЛК, научитесь отслеживать работу этих программ в режиме подключения к контроллеру.

В результате выполнения этого задания вы сможете:

1. Создавать программные объекты различных типов (Data Block, Organization Block, Function, Function Block).
2. Получить опыт работы с системой TIA Portal и программой PLCSIM в части разработки, загрузки и отладки программ.

------

### Чеклист готовности к домашнему заданию

1. Зарегистрируйтесь на [портале Siemens](https://mall.industry.siemens.com/goos/WelcomePage.aspx?regionUrl=/ru&language=ru) и получите персональный логин и пароль для входа в систему. Процесс регистрации описан в [соответствующей инструкции](https://docs.google.com/presentation/d/1RPHvCE2OxBbHRMWSAV2E-HxscZvR2nRIZVHCy8hvjJE/edit?usp=sharing).

2. Загрузите и установите программное обеспечение для создания проекта, входящее в состав пакета TIA Portal с [официального ресурса Siemens](https://support.industry.siemens.com/cs/document/78793685/simatic-step-7-(tia-portal)-v13-trial-download?dti=0&lc=en-DE):
- скачайте все файлы STEP 7 Professional V13 SP2 (DVD 1, DVD 2, SHA-256 checksum) по ссылке в отдельную папку
- запустите SIMATIC_STEP_7_Professional_V13_SP2_Upd4.exe
- пройдите стандартную процедуру установки

3. Загрузите и установите программное обеспечение для симуляции ПЛК, входящее в состав пакета PLCSIM с официального ресурса Siemens:

- скачайте все файлы STEP 7 PLCSIM V13 SP2 (SIMATIC STEP 7 PLCSIM V13 SP2 for STEP 7 Basic and STEP 7 Professional, SHA-256 checksum) по ссылке в отдельную папку
- запустите SIMATIC_S7_PLCSIM_V13_SP2.exe
- пройдите стандартную процедуру установки.

*ОБРАТИТЕ ВНИМАНИЕ! Устанвливаются демо-версии программ TIA Portal и PLCSIM. Их функционал будет ограничен спустя 21 день после установки. Рекомендуется установка софта на виртуальной машине. Как это сделать, описано в инструкции.*

------

### Инструкция к заданию

1. Сделайте копию [Шаблона для домашнего задания](https://docs.google.com/document/d/1MiwldIkT0D7OWcygHadT0PwvF4M3eY3FKipRuTsttIs/edit?usp=sharing) себе на Google Диск.
2. В названии файла введите корректное название лекции и вашу фамилию и имя.
3. Зайдите в «Настройки доступа» и выберите доступ «Просматривать могут все в Интернете, у кого есть ссылка». Ссылка на инструкцию Как предоставить доступ к файлам и папкам на Google Диске
4. Скопируйте текст задания в свой документ.
5. Выполните домашнее задание, запишите ответы и приложите необходимые скриншоты в свой Google Doc.
6. Для проверки домашнего задания преподавателем отправьте ссылку на ваш документ в личном кабинете.
7. Любые вопросы по решению задач задавайте в чате учебной группы.


------

### Инструменты/ дополнительные материалы, которые пригодятся для выполнения задания

1. [TIA Portal 13](https://support.industry.siemens.com/cs/document/109745155/simatic-step-7-including-plcsim-v13-sp2-trial-download?dti=0&lc=en-WW), PLCSIM 13
2. [Инструкция по созданию виртуальной машины](https://docs.google.com/presentation/d/1psnSlotXT7cr8ECnaZaTCDLnIyYOGUzCArLeydeRztY/edit?usp=sharing)
3. [Шаблон для домашнего задания](https://docs.google.com/document/d/1MiwldIkT0D7OWcygHadT0PwvF4M3eY3FKipRuTsttIs/edit?usp=sharing)

------

### Задание 1

1. Создайте новый программный проект в TIA Portal 13.
2. В качестве базового CPU используйте CPU 1214C DC/DC/DC (номер по каталогу 6ES7 214-1AG40-0XB0, версия прошивки 4.1).
3. В папке Program Blocks создайте новый Data Block (DB) со следующими свойствами:
- имя — DB_8_1
- тип — Global DB.
4. Во вновь созданном DB добавьте следующие поля:
- R_IN1, Data type: Real, Start value: 1.0
- R_IN2, Data type: Real, Start value: 2.0
- R_IN3, Data type: Real, Start value: 3.0
- R_IN4, Data type: Real, Start value: 4.0
- R_IN5, Data type: Real, Start value: 5.0
- R_IN6, Data type: Real, Start value: 6.0
- R_IN7, Data type: Real, Start value: 7.0
- R_IN8, Data type: Real, Start value: 8.0
- R_OUT1, Data type: Real
- R_OUT2, Data type: Real
5. В том же программном проекте в папке Program Blocks создайте новый Organization Block (OB) со следующими свойствами:
- имя - OB_Cycle_8_1
- тип - Cyclic interrupt
- Language - LAD
- Cyclic time (ms) - 1000.
6. Сделайте скриншоты вновь созданных DB и OB
7. Произведите компиляцию проекта, убедитесь в отсутствии ошибок, после чего сохраните проект.

------

### Задание 2

1. В том же программном проекте задания №1 в папке Program Blocks создайте новую функцию (FC) со следующими свойствами:
- имя - FC_8_1
- Language - SCL.
2. В подразделе «Input» раздела объявления переменных вновь созданной функции создайте переменные:
- In1, Data type: Real
- In2, Data type: Real
- In3, Data type: Real
- In4, Data type: Real
3. В подразделе «Output» раздела объявления переменных вновь созданной функции создайте переменные:
- Out, Data type: Real.
4. В разделе кода на языке SCL создайте выражение, которое будет связывать вновь добавленные переменные следующим образом:

Out = (In1 + In2) * (In3 + In4).

5. Сделайте скриншот вновь созданного FC, на котором должны быть видны набор переменных и код программы.
6. Произведите компиляцию проекта, убедитесь в отсутствии ошибок, после чего сохраните проект.

------

### Задание 3

1. Добавьте вновь созданную функцию FC_8_1 в организационный блок Main.
2. Произведите привязку входов и выходов каждого из блоков функции следующим образом:
- In1 - "DB_8_1".R_IN1
- In2 - "DB_8_1".R_IN2
- In3 - "DB_8_1".R_IN3
- In4 - "DB_8_1".R_IN4
- Out - "DB_8_1".R_OUT1
3. Добавьте вновь созданную функцию FC_8_1 в организационный блок OB_8_1.
4. Произведите привязку входов и выходов каждого из блоков функции следующим образом:
- In1 - "DB_8_1".R_IN5
- In2 - "DB_8_1".R_IN6
- In3 - "DB_8_1".R_IN7
- In4 - "DB_8_1".R_IN8
- Out - "DB_8_1".R_OUT2
5. Сделайте скриншоты экземпляров FC, добавленного в каждый из указанных OB, с привязками входов и выходов.
6. Произведите компиляцию проекта, убедитесь в отсутствии ошибок, после чего сохраните проект.

------

### Задание 4

1. Включите в проекте режим симуляции, после чего, дождавшись загрузки PLCSIM, загрузите проект в симулятор.
2. После перехода симулятора в режим RUN откройте OB Main, OB_8_1.
3. В каждом из OB включите режим Monitoring и убедитесь, что значение Out на выходе блока FC_8_1 вычисляется в соответствии с формулой из задания 2.
4. Сделайте скриншоты каждого из блоков FC_8_1.
5. Сохраните проект и сделайте его архивную копию, ссылку на которую приложите к заданию.

------

### Правила приёма работы

1. Отправлена ссылка на документ (Google Doc) с выполненным заданием в личном кабинете.
2. Документ размещён на личном Google Диске.
3. К документу настроены права доступа «Просматривать могут все в Интернете, у кого есть ссылка».

------

### Критерии оценки

1. Задание 1 считается выполненным, если в приложенных скриншотах присутствуют DB и OB с заданными свойствами.
2. Задание 2 считается выполненным, если в приложенном скриншоте присутствует вновь созданная FC с заданным набором входов / выходов  и корректным программным кодом.
3. Задание 3 считается выполненным, если в приложенных скриншотах присутствуют экземпляры вновь созданной FC, добавленные в указанные OB, и произведены привязки входов и выходов в соответствии с заданием
4. Задание 4 считается выполненным, если на скриншотах FC в режиме Monitoring на входах и выходах присутствуют корректные значения.
