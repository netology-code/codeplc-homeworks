# Домашнее задание к занятию «Стандарт МЭК 61131-3. Знакомство со средой программирования»

### Цель задания

1. Получить опыт работы в среде программирования ПЛК.
1. Освоить типовые приёмы создания программ для ПЛК.
1. Научиться отслеживать работу этих программ в режиме подключения к контроллеру.

В результате выполнения этого задания вы сможете:

- создавать программные объекты различных типов — Data Block, Organization Block, Function, Function Block;
- получить опыт работы с системой TIA Portal и программой PLCSIM в части разработки, загрузки и отладки программ.

------

### Чеклист готовности к домашнему заданию

1. Зарегистрируйтесь на [портале Siemens](https://mall.industry.siemens.com/goos/WelcomePage.aspx?regionUrl=/ru&language=ru) и получите персональный логин и пароль для входа в систему. Процесс регистрации описан в [инструкции](https://u.netology.ru/backend/uploads/lms/content_assets/file/338/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F_%D0%BF%D0%BE_%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D0%B8_%D0%BD%D0%B0_%D0%BF%D0%BE%D1%80%D1%82%D0%B0%D0%BB%D0%B5_Siemens.pptx).
2. Загрузите с [официального сайта Siemens](https://support.industry.siemens.com/cs/document/78793685/simatic-step-7-(tia-portal)-v13-trial-download?dti=0&lc=en-DE) и установите программное обеспечение для создания проекта PLC Siemens, входящее в состав пакета TIA Portal.

<details>
  <summary> Подсказка по установке (доступна клику).</summary>
  
  
1. Скачайте все файлы по [ссылке](https://support.industry.siemens.com/cs/document/109745155/simatic-step-7-including-plcsim-v13-sp2-trial-download?dti=0&lc=en-DE) в две отдельные папки:
 
  - STEP 7 Professional V13 SP2 (DVD 1, DVD 2, SHA-256 checksum).
  
  ![image](https://github.com/netology-code/phd-homeworks/blob/main/6.6/Step7_1.png)
  
  - SIMATIC STEP 7 PLCSIM V13 SP2 for STEP 7 Basic and STEP 7 Professional, включая SHA-256 checksum.
  
    ![image](https://github.com/netology-code/phd-homeworks/blob/main/6.6/Step7_2.png)
    
2. Запустите установочный файл SIMATIC_STEP_7_Professional_V13_SP2_Upd4.exe, пройдите стандартную процедуру установки.
3. Запустите установочный файл SIMATIC_S7_PLCSIM_V13_SP2.exe, пройдите стандартную процедуру установки.

   **Подсказка по распаковке архиватором WinRAR:**

Если скачанный дистрибутив TIA Portal содержит некоторые файлы с расширением 001, это вызовет проблему при распаковке данных.

Это происходит, потому что некоторые версии архиватора WinRAR, установленные на ПК, ассоциируют файлы с именем 001, как файлы с расширением .rar.

Для решения проблемы можно убрать ассоциацию:

1. Найдите архиватор WinRAR, имеющий окончание 001.
2. Откройте его двойным кликом, далее выбирайте Установка ⇒ Интеграция.
3. В окне слева будет перечень форматов, которые по умолчанию ассоциируются с WinRAR.
4. Уберите галочку с формата 001, нажмите ОК и перезагрузите ПК.

Скрин с действиями дан ниже:
 ![image](https://github.com/netology-code/scada-4-homeworks/blob/scada-7/WinRAR.png)

-----
  
</details>
  
**Обратите внимание.** Устанавливается демо-версия программы. Её функционал будет ограничен через 21 день после установки. Рекомендуем установку софта на виртуальной машине. Как это сделать, описано в [инструкции](https://u.netology.ru/backend/uploads/lms/content_assets/file/339/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F_%D0%BF%D0%BE_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8E_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B_%D0%B8_%D0%BE%D1%82%D0%BA%D0%B0%D1%82%D1%83.pptx).

------

### Инструкция к заданию

1. Сделайте копию файла [«Шаблон для домашнего задания»](https://u.netology.ru/backend/uploads/lms/content_assets/file/1518/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%B4%D0%BB%D1%8F_%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F__%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82_%D0%9C%D0%AD%D0%9A_61131-3._%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE_%D1%81%D0%BE_%D1%81%D1%80%D0%B5%D0%B4%D0%BE%D0%B9_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F__-_%D0%A4%D0%B0%D0%BC%D0%B8%D0%BB%D0%B8%D1%8F_%D0%98%D0%BC%D1%8F__%D0%A1%D0%94%D0%95%D0%9B%D0%90%D0%99%D0%A2%D0%95_%D0%9A%D0%9E%D0%9F%D0%98%D0%AE_.docx) на свой Google Диск.
2. В названии файла введите корректное название лекции и ваши фамилию и имя.
3. Зайдите в «Настройки доступа» и выберите доступ «Просматривать могут все в интернете, у кого есть ссылка». Инструкция «Как предоставить доступ к файлам и папкам на Google Диске» [по ссылке](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop).
4. Скопируйте текст задания в свой документ.
5. Выполните задание, запишите ответы и приложите необходимые скриншоты в свой Google Doc.
6. Для проверки домашнего задания отправьте ссылку на ваш документ в личном кабинете.
7. Любые вопросы по решению задач задавайте в чате учебной группы.


------

### Инструменты и дополнительные материалы для выполнения задания

1. [TIA Portal 13, PLCSIM 13](https://support.industry.siemens.com/cs/document/109745155/simatic-step-7-including-plcsim-v13-sp2-trial-download?dti=0&lc=en-WW).
2. [Инструкция по созданию виртуальной машины](https://u.netology.ru/backend/uploads/lms/content_assets/file/339/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F_%D0%BF%D0%BE_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8E_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B_%D0%B8_%D0%BE%D1%82%D0%BA%D0%B0%D1%82%D1%83.pptx).
3. [Шаблон для домашнего задания](https://u.netology.ru/backend/uploads/lms/content_assets/file/1518/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%B4%D0%BB%D1%8F_%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F__%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82_%D0%9C%D0%AD%D0%9A_61131-3._%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE_%D1%81%D0%BE_%D1%81%D1%80%D0%B5%D0%B4%D0%BE%D0%B9_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F__-_%D0%A4%D0%B0%D0%BC%D0%B8%D0%BB%D0%B8%D1%8F_%D0%98%D0%BC%D1%8F__%D0%A1%D0%94%D0%95%D0%9B%D0%90%D0%99%D0%A2%D0%95_%D0%9A%D0%9E%D0%9F%D0%98%D0%AE_.docx).

------

### Задание 1

1. Создайте новый программный проект в TIA Portal 13.
2. В качестве базового CPU используйте CPU 1214C DC/DC/DC (номер по каталогу 6ES7 214-1AG40-0XB0, версия прошивки 4.1).
3. В папке Program Blocks создайте новый Data Block (DB) со свойствами:

 - имя — DB_8_1;
 - тип — Global DB.
 
4. Во вновь созданном DB добавьте поля:

 - R_IN1, Data type: Real, Start value: 1.0;
 - R_IN2, Data type: Real, Start value: 2.0;
 - R_IN3, Data type: Real, Start value: 3.0;
 - R_IN4, Data type: Real, Start value: 4.0;
 - R_IN5, Data type: Real, Start value: 5.0;
 - R_IN6, Data type: Real, Start value: 6.0;
 - R_IN7, Data type: Real, Start value: 7.0;
 - R_IN8, Data type: Real, Start value: 8.0;
 - R_OUT1, Data type: Real;
 - R_OUT2, Data type: Real.

5. В том же программном проекте в папке Program Blocks создайте новый Organization Block (OB) со свойствами:

 - имя — OB_Cycle_8_1;
 - тип — Cyclic interrupt;
 - Language — LAD;
 - Cyclic time (ms) — 1000.

6. Произведите компиляцию проекта, убедитесь в отсутствии ошибок и сохраните проект.
7. Сделайте скриншоты вновь созданных DB и OB.

------

### Задание 2

1. В том же программном проекте задания 1 в папке Program Blocks создайте новую функцию (FC) со свойствами:

 - имя — FC_8_1;
 - Language — SCL.

2. В подразделе «Input» раздела объявления переменных вновь созданной функции создайте переменные:

 - In1, Data type: Real;
 - In2, Data type: Real;
 - In3, Data type: Real;
 - In4, Data type: Real.

3. В подразделе «Output» раздела объявления переменных вновь созданной функции создайте переменные:

 - Out, Data type: Real.

4. В разделе кода на языке SCL создайте выражение, которое будет связывать вновь добавленные переменные следующим образом: 

 - Out = (In1 + In2) * (In3 + In4).

5. Произведите компиляцию проекта, убедитесь в отсутствии ошибок и сохраните проект.
6. Сделайте скриншот вновь созданного FC, на котором должны быть видны набор переменных и код программы.

------

### Задание 3

1. Добавьте вновь созданную функцию FC_8_1 в организационный блок Main.
2. Произведите привязку входов и выходов каждого из блоков функции следующим образом:

 - In1 — "DB_8_1".R_IN1;
 - In2 — "DB_8_1".R_IN2;
 - In3 — "DB_8_1".R_IN3;
 - In4 — "DB_8_1".R_IN4;
 - Out — "DB_8_1".R_OUT1.

3. Добавьте вновь созданную функцию FC_8_1 в организационный блок OB_Cycle_8_1.
4. Произведите привязку входов и выходов каждого из блоков функции следующим образом:

 - In1 — "DB_8_1".R_IN5;
 - In2 — "DB_8_1".R_IN6;
 - In3 — "DB_8_1".R_IN7;
 - In4 — "DB_8_1".R_IN8;
 - Out — "DB_8_1".R_OUT2.

5. Произведите компиляцию проекта, убедитесь в отсутствии ошибок и сохраните проект.
6. Сделайте скриншоты экземпляров FC, добавленного в каждый из указанных OB, с привязками входов и выходов.

------

### Задание 4

1. Включите в проекте режим симуляции, и, дождавшись загрузки PLCSIM, загрузите проект в симулятор.
2. После перехода симулятора в режим RUN откройте OB Main, OB_Cycle_8_1.
3. В каждом из OB включите режим Monitoring и убедитесь, что значение Out на выходе блока FC_8_1 вычисляется по формуле из задания 2.
4. Сделайте скриншоты каждого из блоков FC_8_1.

------

### Правила приёма работы

1. Отправлена ссылка на документ (Google Doc) с выполненным заданием в личном кабинете.
2. Документ размещён на личном Google Диске.
3. К документу настроены права доступа «Просматривать могут все в интернете, у кого есть ссылка».

------

### Критерии оценки

1. Задание 1 считается выполненным, если в приложенных скриншотах есть DB и OB с заданными свойствами.
2. Задание 2 считается выполненным, если в приложенном скриншоте есть вновь созданная FC с заданным набором входов и выходов и корректным программным кодом.
3. Задание 3 считается выполненным, если в приложенных скриншотах есть экземпляры вновь созданной FC, добавленные в указанные OB, и произведены привязки входов и выходов в соответствии с заданием.
4. Задание 4 считается выполненным, если в приложенных скриншотах FC в режиме Monitoring на входах и выходах присутствуют корректные значения.
