# Домашнее задание к занятию «Программирование на языке ST: Часть 1»

### Цель задания

Выполнив домашнее задание, вы получите опыт создания программ на языке SCL в программном проекте в TIA Portal 13.

В результате выполнения этого задания вы сможете:

1. Вносить изменения в программный код на языке SCL в соответствии с заданием.
2. Получить опыт работы с системой TIA Portal в части программирования на языке SCL и программой PLCSIM в части разработки, загрузки и отладки программ.

------

### Чеклист готовности к домашнему заданию

1. Зарегистрируйтесь на портале Siemens и получите персональный логин и пароль для входа в систему. Процесс регистрации описан в соответствующей инструкции.

2. Загрузите и установите программное обеспечение для создания проекта, входящее в состав пакета TIA Portal с официального ресурса Siemens:

- скачайте все файлы STEP 7 Professional V13 SP2 (DVD 1, DVD 2, SHA-256 checksum) по ссылке в отдельную папку
- запустите SIMATIC_STEP_7_Professional_V13_SP2_Upd4.exe
- пройдите стандартную процедуру установки.

3. Загрузите и установите программное обеспечение для симуляции ПЛК, входящее в состав пакета PLCSIM с официального ресурса Siemens:

- скачайте все файлы STEP 7 PLCSIM V13 SP2 (SIMATIC STEP 7 PLCSIM V13 SP2 for STEP 7 Basic and STEP 7 Professional, SHA-256 checksum) по ссылке в отдельную папку
- запустите SIMATIC_S7_PLCSIM_V13_SP2.exe
- пройдите стандартную процедуру установки.

4. Скачайте по указанной ссылке [архив программного проекта Netology_Project_ST_1](https://drive.google.com/file/d/1Kj4EsO8ZMD7Qb946jnim0rhrwnOD8aGb/view?usp=sharing) и распакуйте его, используя функцию Retrieve среды программирования TIA Portal.

*ОБРАТИТЕ ВНИМАНИЕ! Устанвливаются демо-версии программы TIA Portal. Её функционал будет ограничен спустя 21 день после установки. Рекомендуется установка софта на виртуальной машине. Как это сделать, описано в инструкции.*

------

### Инструкция к заданию

1. Сделайте копию [Шаблона для домашнего задания](https://docs.google.com/document/d/1mjJ4Siyw6zgp1zHR7xaU-ysv_Kv5DMaYtPE5R1EBM78/edit?usp=sharing) себе на Google Диск.
2. В названии файла введите корректное название лекции и вашу фамилию и имя.
3. Зайдите в «Настройки доступа» и выберите доступ «Просматривать могут все в Интернете, у кого есть ссылка». Ссылка на инструкцию Как предоставить доступ к файлам и папкам на Google Диске
4. Скопируйте текст задания в свой документ.
5. Выполните домашнее задание, запишите ответы и приложите необходимые скриншоты в свой Google Doc.
6. Для проверки домашнего задания преподавателем отправьте ссылку на ваш документ в личном кабинете.
7. Любые вопросы по решению задач задавайте в чате учебной группы.

------

### Инструменты/ дополнительные материалы, которые пригодятся для выполнения задания

1. [TIA Portal 13](https://support.industry.siemens.com/cs/document/109745155/simatic-step-7-including-plcsim-v13-sp2-trial-download?dti=0&lc=en-WW), PLCSIM 13
2. [Архив проекта Netology_Project_ST_1](https://drive.google.com/file/d/1Kj4EsO8ZMD7Qb946jnim0rhrwnOD8aGb/view?usp=sharing)
3. [Инструкция по созданию виртуальной машины](https://docs.google.com/presentation/d/1psnSlotXT7cr8ECnaZaTCDLnIyYOGUzCArLeydeRztY/edit?usp=sharing)
4. [Шаблон для домашнего задания](https://docs.google.com/document/d/1mjJ4Siyw6zgp1zHR7xaU-ysv_Kv5DMaYtPE5R1EBM78/edit?usp=sharing)

------

### Задание 1

1. В проекте [Netology_Project_ST_1](https://drive.google.com/file/d/1Kj4EsO8ZMD7Qb946jnim0rhrwnOD8aGb/view?usp=sharing) проделайте следующие операции:
- внесите изменения в блок данных DB_ValveEmul: добавьте набор параметров Valve2* по аналогии с имеющимися Valve1
- внесите изменения в организационный блок ValveEmul_OB: добавьте второй экземпляр FC_ValveEmul, привяжите его входы/выходы к полям Valve2 из DB_ValveEmul
- внесите изменения в организационный блок OB1 (Main): добавьте второй экземпляр FB ValveCtrl, привяжите его входы/выходы к полям Valve2* из DB_ValveEmul.
2. Произведите компиляцию проекта и его загрузку в PLCSIM.
3. В OB1 включите режим мониторинга и убедитесть в корректности работы вновь добавленного экземпляра FB.
4. Сделайте скриншот одновременной работы двух экземпляров FB и приложите его к домашнему заданию.

------

### Задание 2

1. Измените функциональный блок FB ValveCtrl следующим образом: добавьте вход MonTime (тип: Time), чтобы задавать время задержки на формирование ошибки с его помощью.
2. Внесите соответствующие изменения в блок данных DB_ValveEmul, добавив там поля Valve1_Time, Valve2_Time (тип: Time).
3. Произведите необходимые привязки во всех экземплярах данного FB, вызываемого в OB1.
4. Произведите компиляцию проекта и его загрузку в PLCSIM.
5. В OB1 включите режим мониторинга и убедитесь в корректности работы всех экземпляров FB.
6. Сделайте скриншот одновременной работы двух экземпляров FB с вновь добавленным параметром и приложите его к домашнему заданию.

------

### Задание 3* (необязательное)

1. Внесите в программный код организационного блока OB1 следующие изменения: добавьте возможность подсчёта времени, в течение которого оба клапана - Valve1, Valve2 - находятся в положении «Открыт».
2. В блок данных DB_ValveEmul добавьте поле TooMuchOpen (тип: Bool), в которое должно записываться значение 1 (TRUE), если время пребывания обоих клапанов в положении «Открыт» превысило заданное в параметре OpenTime (тип: Time), который также должен быть добавлен в качестве поля в DB_ValveEmul.
3. Сделайте скриншот одновременной работы двух экземпляров FB с вновь добавленными параметрами и приложите его к домашнему заданию. 

------

### Правила приёма работы

1. Отправлена ссылка на документ (Google Doc) с выполненным заданием в личном кабинете.
2. Документ размещён на личном Google Диске.
3. К документу настроены права доступа «Просматривать могут все в Интернете, у кого есть ссылка».

------

### Критерии оценки

1. Задание 1 считается выполненным, если на приложенном скриншоте показана корректная работа двух экземпляров FB.
2. Задание 2 считается выполненным, если на приложенном скриншоте показана корректная работа двух экземпляров FB с вновь добавленным параметром.
